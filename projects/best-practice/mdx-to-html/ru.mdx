---
title: 'MDX –≤ HTML'
description: '–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º Markdown –≤ HTML –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å i18n'
tags: ['TypeScript', 'SSR', 'Markdown']
---

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞—Ç—å—é –ø—Ä–æ [–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é](/projects/best-practice/app-router-i18n)

---

## –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤ –∏—Ç–æ–≥–µ?

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ç–∞—Ç–µ–π, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥–ª–∞–≤–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —ç—Ç–æ–º —Å–∞–π—Ç–µ - —ç—Ç–æ —Ç–æ, —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤ –∏—Ç–æ–≥–µ (:

–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—ë—Ç–µ –ø–∞–ø–∫–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ `projects`, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç–µ –∫–∞–∫ —É–≥–æ–¥–Ω–æ - –≤—Å—ë —Å–¥–µ–ª–∞–µ—Ç—Å—è –∑–∞ –≤–∞—Å, –Ω–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å –∫–æ–¥–æ–º –∫–æ–º–ø—É, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ üßë‚Äçüíª

–¢–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –±–ª–æ–≥–æ–≤ –∏–ª–∏ —á–µ–≥–æ –∑–∞—Ö–æ—Ç–∏—Ç–µ:

```text hideHeader githubPath="projects"
your-project
‚îú‚îÄ‚îÄ projects
‚îÇ   ‚îî‚îÄ‚îÄ category
‚îÇ       ‚îú‚îÄ‚îÄ project-name
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ en.mdx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ru.mdx
‚îÇ       ‚îú‚îÄ‚îÄ en.mdx
‚îÇ       ‚îî‚îÄ‚îÄ ru.mdx
‚îî‚îÄ‚îÄ package.json
```

–î–æ–ø—É—Å—Ç–∏–º, –≤—ã –∑–∞—Ö–æ—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –≤ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

1. –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ—ë `ru.mdx`, `en.mdx`;
2. –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º `ru.mdx`, `en.mdx`;
3. –ü–∏—à–µ–º —Å—Ç–∞—Ç—å—é ü•∞

---

## –°–æ–∑–¥–∞—ë–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

–ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MDX –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [Next.js](https://nextjs.org/docs/app/building-your-application/configuring/mdx)? –ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –ø–ª–∞–≥–∏–Ω—ã –ø–æ —Ç–∏–ø—É [`rehype-slug`](https://www.npmjs.com/package/rehype-slug), [`rehype-autolink-headings`](https://www.npmjs.com/package/rehype-autolink-headings) –∏ [`rehype-mdx-code-props`](https://www.npmjs.com/package/rehype-mdx-code-props)?

–í—ã –º–æ–∂–µ—Ç–µ —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞—Ç—å, —ç—Ç–æ –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ, –Ω–æ –≤—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ —á–∞—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ö–æ–Ω–µ—á–Ω–æ, –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–ø–∏—Å–∞–≤ —Å–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –≤–º–µ—Å—Ç–æ Next.js üòÅ –ù–æ –Ω–µ –±—É–¥–µ–º —É—Ö–æ–¥–∏—Ç—å –≤ –∫—Ä–∞–π–Ω–æ—Å—Ç–∏.

–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º MDX:

```text hideHeader githubPath="src/shared/config/mdx"
shared/config/mdx
‚îú‚îÄ‚îÄ plugins   - –Ω–∞—à–∏ rehype/remark –ø–ª–∞–≥–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ rehype-auto-heading.ts
‚îÇ   ‚îî‚îÄ‚îÄ rehype-extract-code-props.ts
‚îú‚îÄ‚îÄ types
‚îÇ   ‚îî‚îÄ‚îÄ get-mdx.type.ts
‚îú‚îÄ‚îÄ get-mdx.ts   - –ø–æ–ª—É—á–µ–Ω–∏–µ metadata, –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ headlines –∏–∑ mdx
‚îú‚îÄ‚îÄ mdx-components.tsx   - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ mdx
‚îî‚îÄ‚îÄ mdx-remote.tsx   - –æ–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MDXRemote
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å MDX

–°–æ–∑–¥–∞–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ .mdx —Ñ–∞–π–ª–æ–≤ `shared/config/mdx/get-mdx.ts`:

```TypeScript filename="shared/config/mdx/get-mdx.ts" githubPath="src/shared/config/mdx/get-mdx.ts"
'use server';

import fs from 'fs/promises';
import matter from 'gray-matter';
import rehypeStringify from 'rehype-stringify';
import remarkParse from 'remark-parse';
import remarkRehype from 'remark-rehype';
import { unified } from 'unified';
import {
	MdxHeadline,
	ProjectMetadata,
} from '../../config/mdx/types/get-mdx.type';
import { rehypeAutoHeading } from './plugins/rehype-auto-heading';

interface MdxResponse<T> {
	metadata: T;
	content: string;
	headlines: MdxHeadline[];
}

export async function getMdx<T = ProjectMetadata>(
	filePath: string,
): Promise<MdxResponse<T>> {
	const fileContents = await fs.readFile(filePath, 'utf8');

	// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–¥ —á–µ—Ä–µ–∑ gray-matter
	const matterData = matter(fileContents);
	const metadata = matterData.data as T;
	const content = matterData.content;

	// * Get project headlines
	const headlines: MdxHeadline[] = [];

	await unified()
		.use(remarkParse)
		.use(remarkRehype)
		.use(rehypeAutoHeading, headlines)
		.use(rehypeStringify)
		.process(content);

	return { metadata, content, headlines };
}
```

–ú–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `matter(fileContents)` –∏ –ø–æ–ª—É—á–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, –Ω–æ –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞ –≤—ã–Ω–æ—Å–∏–º –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ—É–Ω–∫—Ü–∏—é `getMdx()`.

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º —Å–ø–æ–∫–æ–π–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ MDX. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ [`gray-matter`](https://www.npmjs.com/package/gray-matter) —Å–ø–æ–∫–æ–π–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å [`front-matter`](front-matter) –∏ —Ç.–ø.

#### –¢–∏–ø–∏–∑–∞—Ü–∏—è MDX –¥–∞–Ω–Ω—ã—Ö

–í–Ω—É—Ç—Ä–∏ MDX —Ñ–∞–π–ª–æ–≤ —É –Ω–∞—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫–∞—è-–ª–∏–±–æ —Ç–∏–ø–∏–∑–∞—Ü–∏—è. –ù–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä—É–µ–º:

```TypeScript filename="shared/config/mdx/types/get-mdx.type.ts" githubPath="src/shared/config/mdx/types/get-mdx.type.ts"
import { StackVariants } from '@/shared/ui';

export interface MdxHeadline {
	title: string;
	href: string;
	nested?: MdxHeadline[];
}

export interface ProjectMetadata {
	// –ü–∏—à–µ–º –ª—é–±—ã–µ —Å–≤–æ–∏ —Ç–∏–ø—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
	// –í–æ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∏ —Ç–∏–ø—ã:
	note: string;
	title: string;
	description: string;
	tags?: StackVariants[];
	publishDate: string;
}

export interface CategoryMetadata {
	// –¢–∞–∫–∂–µ –ø–∏—à–µ–º –ª—é–±—ã–µ —Å–≤–æ–∏ —Ç–∏–ø—ã
	title: string;
	link: string;
}
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–¢–µ–ø–µ—Ä—å —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ... –°–æ–∑–¥–∞—ë–º —Å–≤–æ–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ —Å–≤–æ–π –≤–∫—É—Å –∏ —Ü–≤–µ—Ç –≤ `MDXComponentsData`. –í–æ—Ç –º–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –º–æ–∂–µ—Ç–µ –±—Ä–∞—Ç—å –∏–¥–µ–∏!

```TypeScript filename="shared/config/mdx/mdx-components.tsx" githubPath="src/shared/config/mdx/mdx-components.tsx"
import { cn } from '@/shared/lib';
import { CodeBlock, Heading, LinkHover, StackVariants } from '@/shared/ui';
import { Code } from '@nextui-org/react';
import type { MDXComponents } from 'mdx/types';
import { ComponentPropsWithoutRef } from 'react';
import { getDictionary } from '../i18n/dictionaries';

interface ExtendedCodeProps extends React.HTMLAttributes<HTMLElement> {
	filename?: string;
	githubPath?: string;
	hideHeader?: boolean;
}

export const MDXComponentsData: MDXComponents = {
	code: async (props: ExtendedCodeProps) => {
		const { children, className, ...rest } = props;
		const match = /language-(\w+)/.exec(className || '');
		const dict = await getDictionary();

		if (!match) {
			return (
				<Code
					className='bg-default-200/50 py-0 px-1 h-fit rounded-md -top-0.5 select-text min-w-fit border border-default-200 text-default-700 !leading-5'
				>
					{children}
				</Code>
			);
		}

		return (
			<CodeBlock
				text={String(children)}
				language={match[1] as StackVariants}
				fileName={props?.filename}
				hideHeader={props?.hideHeader}
				dict={dict.ui}
				github={{
					path: props?.githubPath,
				}}
				{...rest}
			/>
		);
	},
	p: ({ children, className }: ComponentPropsWithoutRef<'p'>) => {
		return (
			<p className={cn('text-default-600 my-5 leading-7', className)}>
				{children}
			</p>
		);
	},
	a: ({ href, children, ...props }: ComponentPropsWithoutRef<'a'>) => {
		return (
			<LinkHover href={href} {...props}>
				{children}
			</LinkHover>
		);
	},
	h2: ({ children, ...props }: ComponentPropsWithoutRef<'h2'>) => (
		<Heading
			Tag='h2'
			className='text-xl font-bold -mt-[calc(var(--height-navbar) - 2rem)] mb-6'
			{...props}
		>
			{children}
		</Heading>
	),
	h3: ({ children, ...props }: ComponentPropsWithoutRef<'h3'>) => (
		<Heading
			Tag='h3'
			className='text-lg font-semibold -mt-[calc(var(--height-navbar) - 1.5rem)] mb-4'
			{...props}
		>
			{children}
		</Heading>
	),
	h4: ({ children, ...props }: ComponentPropsWithoutRef<'h4'>) => (
		<Heading
			Tag='h4'
			className='font-medium -mt-[calc(var(--height-navbar) - 1.5rem)] mb-4'
			{...props}
		>
			{children}
		</Heading>
	),
	hr: () => <hr className='my-12 border-default-100' />,
	ul: ({ children, className }: ComponentPropsWithoutRef<'ul'>) => {
		return (
			<ul
				className={cn(
					'text-default-600 my-5 leading-7 list-disc marker:text-default-200 list-inside',
					className,
				)}
			>
				{children}
			</ul>
		);
	},
	ol: ({ children, className }: ComponentPropsWithoutRef<'ol'>) => {
		return (
			<ol
				className={cn(
					'text-default-600 my-5 leading-7 list-decimal marker:text-default-500 list-inside',
					className,
				)}
			>
				{children}
			</ol>
		);
	},
};
```

#### –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è MDXRemote

–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞—Ç—å –æ–±—ë—Ä—Ç–∫—É –¥–ª—è `MDXRemote`, –Ω–æ –Ω–∞–º –∂–µ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å? –í–¥—Ä—É–≥ –º—ã —Ä–µ–∑–∫–æ –∑–∞—Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MDXRemote` –Ω–µ —Ç–æ–ª—å–∫–æ –≤ layout –¥–ª—è MDX —Ñ–∞–π–ª–æ–≤, –Ω–æ –∏ –Ω–∞ –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ?

```TypeScript filename="shared/config/mdx/mdx-remote.tsx" githubPath="src/shared/config/mdx/mdx-remote.tsx"
import { MDXRemoteProps, MDXRemote as MDXRemoteRSC } from 'next-mdx-remote/rsc';
import { FC } from 'react';
import remarkGfm from 'remark-gfm';
import { MDXComponentsData } from './mdx-components';
import { rehypeAutoHeading } from './plugins/rehype-auto-heading';
import { rehypeExtractCodeProps } from './plugins/rehype-extract-code-props';

export const MDXRemote: FC<MDXRemoteProps> = ({
	source,
	components,
	options,
}) => {
	return (
		<MDXRemoteRSC
			source={source}
			components={{ ...MDXComponentsData, ...components }}
			options={{
				mdxOptions: {
					rehypePlugins: [rehypeExtractCodeProps, rehypeAutoHeading],
					remarkPlugins: [remarkGfm],
				},
				...options,
			}}
		/>
	);
};
```

---

## –ü–∏—à–µ–º —Å–≤–æ–∏ rehype –ø–ª–∞–≥–∏–Ω—ã

–¢—É—Ç –≤—Å—ë –ª–µ–≥–∫–æ. –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º –∏ –ø–æ–ª—å–∑—É–µ–º—Å—è. –°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã —ç—Ç–∏ –ø–ª–∞–≥–∏–Ω—ã –∏ –ø–æ—á–µ–º—É –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è.

#### rehypeAutoHeading

- `rehypeAutoHeading` - –ø–ª–∞–≥–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç `id` –∫ `h1 - h6` –∫–∞–∫ –≤ [`rehype-slug`](https://www.npmjs.com/package/rehype-slug), –¥–æ–±–∞–≤–ª—è–µ—Ç —è–∫–æ—Ä–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫ –≤ [`rehype-autolink-headings`](https://www.npmjs.com/package/rehype-autolink-headings) –∏ –≤—ã–≤–æ–¥–∏—Ç –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å —É—á—ë—Ç–æ–º –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ **(–Ω–æ –Ω–µ –±–æ–ª–µ–µ 2-—Ö —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)** –≤ –≤–∏–¥–µ:

```TypeScript hideHeader
{
	title: string;
	href: string;
	nested?: [
		{
			title: string;
			href: string;
		}
	];
}[]
```

–ö–æ–¥ –ø–ª–∞–≥–∏–Ω–∞ `rehypeAutoHeading`:

```TypeScript filename="shared/config/mdx/plugins/rehype-auto-heading.ts" githubPath="src/shared/config/mdx/plugins/rehype-auto-heading.ts"
import { toLatin } from '@/shared/lib';
import { slug } from 'github-slugger';
import { toString } from 'hast-util-to-string';
import { visit } from 'unist-util-visit';
import { MdxHeadline } from '../types/get-mdx.type';

export function rehypeAutoHeading(headlines?: MdxHeadline[]) {
	return (tree: any) => {
		const stack: { depth: number; headline: MdxHeadline }[] = [];

		visit(tree, 'element', (node) => {
			if (/h[1-6]/.test(node.tagName)) {
				const text = toString(node);
				const id = toLatin(slug(text));
				const depth = parseInt(node.tagName.slice(1), 10);
				const headline = {
					title: text.endsWith(':') ? text.slice(0, -1) : text,
					href: `#${id}`,
				};

				if (!node.properties) node.properties = {};
				node.properties.id = id;

				while (stack.length && stack[stack.length - 1].depth >= depth) {
					stack.pop();
				}

				if (headlines) {
					if (depth === 1 || stack.length === 0) {
						headlines.push(headline);
						stack.push({ depth, headline });
					} else {
						const parent = stack[stack.length - 1].headline;
						if (!parent.nested) {
							parent.nested = [];
						}
						parent.nested.push(headline);
						if (depth === 2) {
							stack.push({ depth, headline });
						}
					}
				}

				node.children = [
					{
						type: 'element',
						tagName: 'a',
						properties: { href: `#${id}`, isTitle: true },
						children: [...node.children],
					},
				];
			}
		});
	};
}
```

#### rehypeExtractCodeProps

- `rehypeExtractCodeProps` - –ø–ª–∞–≥–∏–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π `–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ` –≤ –±–æ–ª–æ–∫–µ –∫–æ–¥–∞ –∏–∑ —Ñ–∞–π–ª–∞ .mdx, —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `boolean` —Ç–∏–ø, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —Ç–æ–ª—å–∫–æ –∫–ª—é—á.

–ù–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É, –Ω–æ –≥–æ—Ç–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω [`rehype-mdx-code-props`](https://www.npmjs.com/package/rehype-mdx-code-props) —É –º–µ–Ω—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª, –ø–æ—ç—Ç–æ–º—É –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π.

```TypeScript filename="shared/config/mdx/plugins/rehype-extract-code-props.ts" githubPath="src/shared/config/mdx/plugins/rehype-extract-code-props.ts"
import { visit } from 'unist-util-visit';

export function rehypeExtractCodeProps() {
	return (tree: any) => {
		visit(tree, 'element', (node) => {
			if (node.tagName === 'code' && node.data && node.data.meta) {
				const metaString = node.data.meta.trim();

				// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä –∫–ª—é—á="–∑–Ω–∞—á–µ–Ω–∏–µ"
				const props: { [key: string]: string | boolean } = {};
				const regex = /(\w+)="([^"]*)"|(\w+)/g;
				let match;
				while ((match = regex.exec(metaString)) !== null) {
					if (match[2] !== undefined) {
						// –î–ª—è –∫–ª—é—á="–∑–Ω–∞—á–µ–Ω–∏–µ"
						props[match[1]] = match[2];
					} else {
						// –î–ª—è –ø—Ä–æ—Å—Ç–æ –∫–ª—é—á–∞ (–±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è)
						props[match[3]] = true; // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ true
					}
				}

				// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤ —Å–≤–æ–π—Å—Ç–≤–∞ —É–∑–ª–∞
				node.properties = {
					...node.properties,
					...props,
				};
			}
		});
	};
}
```

---

## –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤:

```text hideHeader githubPath="src/entity/project/model"
entity/project/model
‚îú‚îÄ‚îÄ services
‚îÇ   ‚îú‚îÄ‚îÄ get-project.ts   - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ get-projects-by-category.ts   - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ get-projects.ts   - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ types
    ‚îî‚îÄ‚îÄ project.type.ts
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–¢–µ–ø–µ—Ä—å –º—ã –ø—É—Å–∫–∞–µ–º –≤ —Ö–æ–¥ —Ä–∞–Ω–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `getMdx()` –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–µ–º—Å—è –ª—ë–≥–∫–æ—Å—Ç—å—é –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å .mdx —Ñ–∞–π–ª–æ–≤. `get-project.ts`:

```TypeScript filename="entity/project/model/services/get-project.ts" githubPath="src/entity/project/model/services/get-project.ts"
'use server';

import { getLang } from '@/shared/config/i18n';
import { CategoryMetadata, getMdx } from '@/shared/config/mdx';
import path from 'path';
import { ProjectResponse } from '../types/project.type';

export async function getProject(
	category: string,
	name: string,
): Promise<ProjectResponse> {
	const lang = await getLang();

	// –ü–æ–ª—É—á–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º .mdx —Ñ–∞–π–ª–∞
	const dir = path.join(
		process.cwd(),
		'projects',
		category,
		name,
		`${lang}.mdx`,
	);
	// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
	const { content, headlines, metadata } = await getMdx(dir);

	// –ü–æ–ª—É—á–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º .mdx —Ñ–∞–π–ª–∞
	const dirCategory = path.join(
		process.cwd(),
		'projects',
		category,
		`${lang}.mdx`,
	);
	// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
	const { content: contentCategory, metadata: metadataCategory } =
		await getMdx<CategoryMetadata>(dirCategory);

	// –ï—Å–ª–∏ –º–µ—Ç–∞–¥–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —Ç–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É!
	if (!metadata) throw new Error(`Unable to find metadata in file "${dir}"`);

	// –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å getMdx()
	return {
		metadata,
		metadataCategory: {
			...metadataCategory,
			link: `/projects/${category}`,
		},
		contentCategory,
		content,
		headlines,
	};
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

–í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∫–æ–¥—É –≤—Å—ë –Ω–∞–ø–∏—Å–∞–Ω–æ. `get-projects-by-category.ts`:

```TypeScript filename="entity/project/model/services/get-projects-by-category.ts" githubPath="src/entity/project/model/services/get-projects-by-category.ts"
'use server';

import { getLang } from '@/shared/config/i18n';
import { CategoryMetadata, getMdx, ProjectMetadata } from '@/shared/config/mdx';
import fs from 'fs/promises';
import path from 'path';

interface ProjectsByCategoryResponse {
	category: CategoryMetadata;
	projects: (ProjectMetadata & { link: string })[];
}

export async function getProjectsByCategory(
	category: string,
): Promise<ProjectsByCategoryResponse> {
	// –°–º–æ—Ç—Ä–∏–º —Å—Ç–∞—Ç—å—é –ø—Ä–æ i18n!
	// –°—Å—ã–ª–∫–∞ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
	// –ò–ª–∏ –≤—ã–ø–∏–ª–∏–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å i18n
	const lang = await getLang();

	const dirCategory = path.join(process.cwd(), 'projects', category);
	const projectFile = path.join(dirCategory, `${lang}.mdx`);

	const { metadata: metadataCategory } = await getMdx<CategoryMetadata>(
		projectFile,
	);

	const projectDirs = await fs.readdir(dirCategory, { withFileTypes: true });

	// –ü—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–∞–º –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
	// –ò –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
	const metadataProject = await Promise.all(
		projectDirs
			.filter((dirent) => dirent.isDirectory())
			.map(async (dirent) => {
				const projectFile = path.join(dirCategory, dirent.name, `${lang}.mdx`);

				const mdxProject = await getMdx<CategoryMetadata>(projectFile);
				const projectMetadata = mdxProject.metadata;

				return {
					...projectMetadata,
					link: `/projects/${category}/${dirent.name}`,
				} as ProjectMetadata & { link: string };
			}),
	);

	return {
		category: metadataCategory,
		projects: metadataProject,
	};
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

–¢—É—Ç –≤—Å—ë –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é `getMdx(dir)` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ `get-projects.ts`:

```TypeScript filename="entity/project/model/services/get-projects.ts" githubPath="src/entity/project/model/services/get-projects.ts"
'use server';

import { getLang } from '@/shared/config/i18n';
import { CategoryMetadata, getMdx, ProjectMetadata } from '@/shared/config/mdx';
import fs from 'fs/promises';
import path from 'path';
import { ProjectsResponse } from '../types/project.type';

export async function getProjects(): Promise<ProjectsResponse[]> {
	const lang = await getLang();

	const rootDir = path.join(process.cwd(), 'projects');
	const categoryDirs = await fs.readdir(rootDir, { withFileTypes: true });

	const projectsByCategory: ProjectsResponse[] = [];

	for (const dirent of categoryDirs) {
		if (dirent.isDirectory()) {
			const categoryDir = path.join(rootDir, dirent.name);
			const projectFile = path.join(categoryDir, `${lang}.mdx`);

			const mdxCategory = await getMdx<CategoryMetadata>(projectFile);
			const metadataCategory = mdxCategory.metadata;

			const projectDirs = await fs.readdir(categoryDir, {
				withFileTypes: true,
			});
			const projects: (ProjectMetadata & { link: string })[] = [];

			for (const projectDirent of projectDirs) {
				if (projectDirent.isDirectory()) {
					const projectFile = path.join(
						categoryDir,
						projectDirent.name,
						`${lang}.mdx`,
					);

					const mdxProject = await getMdx<CategoryMetadata>(projectFile);
					const projectMetadata = mdxProject.metadata;

					projects.push({
						...projectMetadata,
						link: `/projects/${dirent.name}/${projectDirent.name}`,
					} as ProjectMetadata & { link: string });
				}
			}

			projectsByCategory.push({
				title: metadataCategory.title,
				link: `/projects/${dirent.name}`,
				projects,
			});
		}
	}

	return projectsByCategory;
}
```

#### –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```TypeScript filename="entity/project/model/types/project.type.ts" githubPath="src/entity/project/model/types/project.type.ts"
import {
	CategoryMetadata,
	MdxHeadline,
	ProjectMetadata,
} from '@/shared/config/mdx';

export interface ProjectResponse {
	metadata: ProjectMetadata;
	content: string;
	metadataCategory: CategoryMetadata;
	contentCategory: string;
	headlines: MdxHeadline[];
}

export interface ProjectsResponse {
	title: string;
	link: string;
	projects: (ProjectMetadata & { link: string })[];
}
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ App Router

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–æ—É—Ç–æ–≤ –≤ `/app`:

```text hideHeader
[lang]   - –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ projects
    ‚îî‚îÄ‚îÄ [category]
        ‚îú‚îÄ‚îÄ [name]
        ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx   - layout –¥–ª—è mdx —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤
        ‚îî‚îÄ‚îÄ page.tsx   - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏–∑ N –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

#### –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è MDX

–°–æ–∑–¥–∞–¥–∏–º layout –¥–ª—è mdx `app/[lang]/projects/[category]/[name]/page.tsx`:

```TypeScript filename="app/[lang]/projects/[category]/[name]/page.tsx" githubPath="app/[lang]/projects/[category]/[name]/page.tsx"
import { getProject } from '@/entity/project';
import { MDXRemote } from '@/shared/config/mdx';
import { Header, Headlines } from '@/widgets';
import { MDXComponents } from 'mdx/types';
import { Metadata } from 'next';
import dynamic from 'next/dynamic';

export type ProjectPageProps = {
	params: { name: string; category: string };
};

export default async function ProjectPage({ params }: ProjectPageProps) {
	const { metadata, content, metadataCategory, headlines } = await getProject(
		params.category,
		params.name,
	);

	const components: MDXComponents = {
		// –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –≤–∞—à .mdx —Ñ–∞–π–ª
		// –ß—Ç–æ–±—ã –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ .mdx
		AuthExample: dynamic(() =>
			import('@/projects/best-practice/app-router-auth/examples/auth').then(
				(mod) => mod.AuthExample,
			),
		),
	};

	return (
		<>
			<Header
				note={metadata?.note || metadataCategory?.title}
				noteLink={metadata?.note || metadataCategory?.link}
				title={metadata?.title}
				description={metadata?.description}
				tags={metadata?.tags}
			/>
			{/* MDXRemote –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ @/shared/config/mdx ! */}
			<MDXRemote source={content} components={components} />
			<Headlines headlines={headlines} />
		</>
	);
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ—Ç–∞–¥–∞—Ç—É (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
// –ë—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è SEO –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
export async function generateMetadata({
	params,
}: ProjectPageProps): Promise<Metadata> {
	const { metadata } = await getProject(params.category, params.name);

	return {
		title: `Simple App | ${metadata.title}`,
		description: `${metadata.description}. Technologies: ${metadata.tags?.join(
			', ',
		)}`,
	};
}
```

#### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

–°–æ–∑–¥–∞–¥–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `app/[lang]/projects/[category]/page.tsx`:

```TypeScript filename="app/[lang]/projects/[category]/page.tsx" githubPath="app/[lang]/projects/[category]/page.tsx"
import { getProjectsByCategory } from '@/entity/project';
import { getDictionary } from '@/shared/config/i18n';
import { Header } from '@/widgets';
import { Metadata } from 'next';
import Link from 'next/link';

export type ProjectCategoryPageProps = {
	params: { category: string };
};

export default async function ProjectCategoryPage({
	params,
}: ProjectCategoryPageProps) {
	const { projects, category } = await getProjectsByCategory(params.category);

	// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
	const dict = await getDictionary();

	return (
		<>
			<Header
				note={dict.ui['category-note']}
				title={category.title}
				description={dict.ui['category-description']}
			/>

			{/* –ü—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º –ø—Ä–æ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */}
			<div className='grid sm:grid-cols-2 gap-4'>
				{projects.map((project) => (
					<Link
						href={project.link}
						key={project.title}
						className='px-6 py-4 bg-default-100 hover:bg-default-100/50 border border-default-200 hover:border-default-300 rounded-md flex flex-col gap-2 transition active:scale-[0.98]'
					>
						{project.title}
						<span className='text-default-600 text-sm'>
							{project.description}
						</span>
					</Link>
				))}
			</div>
		</>
	);
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ—Ç–∞–¥–∞—Ç—É (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
// –ë—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è SEO –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
export async function generateMetadata({
	params,
}: ProjectCategoryPageProps): Promise<Metadata> {
	const { category, projects } = await getProjectsByCategory(params.category);

	return {
		title: `Simple App | ${category.title}`,
		description: `Category: ${category.title}. Projects: ${projects
			.map((project) => project.title)
			.join(', ')}.`,
	};
}
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—á–∏—Ç–∞–ª –¥–æ –∫–æ–Ω—Ü–∞. –ù–∞–¥–µ—é—Å—å —Ç—ã –Ω–∞—à—ë–ª –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ —Å–º–æ–≥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª!

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—è–Ω–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–¥. –ü–æ—á–µ–º—É —É —Ç–µ–±—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ —É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç? –ú–æ–∂–µ—Ç –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ —Ç–µ, –∏–ª–∏ –Ω–µ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞—Ä–µ—à–∞–ª–∞ ü§®

–¢—ã –∂–µ –∫–æ–¥–µ—Ä (—Ç–∞–∫ –≤–µ–¥—å?) –∏—â–∏ —Ä–µ—à–µ–Ω–∏—è!
